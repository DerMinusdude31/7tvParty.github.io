// Obfuskierter und minifizierter Code
(function(){let e=[],t=[],n=0,o=0,i=!0,s="global",a="Global",c=localStorage.getItem(`memoryHighscore_${s}`)||"-";const l=document.getElementById("background-canvas"),d=l.getContext("2d");function r(){l.width=window.innerWidth,l.height=window.innerHeight}window.addEventListener("resize",r),r();let h=Array(120).fill().map(()=>({x:Math.random()*l.width,y:-10-Math.random()*l.height,speed:Math.random()*2+.5,size:Math.random()*1.5+.5}));function p(){d.clearRect(0,0,l.width,l.height),d.fillStyle="rgb(0, 0, 0)",d.fillRect(0,0,l.width,l.height),d.fillStyle="rgba(255, 255, 255, 0.8)",h.forEach(e=>{d.beginPath(),d.arc(e.x,e.y,e.size,0,2*Math.PI),d.fill(),e.y+=e.speed,e.y>l.height&&(e.y=-10,e.x=Math.random()*l.width,e.speed=Math.random()*2+.5)}),requestAnimationFrame(p)}async function m(){try{let t;t="global"===s?"https://7tv.io/v3/emote-sets/global":`https://7tv.io/v3/emote-sets/${s}`;const n=await fetch(t),o=await n.json();if(!o.emotes||o.emotes.length<8)throw new Error("Nicht genÃ¼gend Emotes im Set");e=o.emotes.sort(()=>Math.random()-.5).slice(0,8).map(e=>({id:e.id,url:`https://cdn.7tv.app/emote/${e.id}/2x.webp`,name:e.name})),e=[...e,...e].sort(()=>Math.random()-.5),document.getElementById("loading").style.display="none",document.getElementById("preGameMenu").style.display="none",document.getElementById("gameInfo").style.display="flex",document.getElementById("memoryGrid").style.display="grid",document.getElementById("gameContainer").classList.add("game-active"),f()}catch(e){console.error("Fehler beim Laden der Emotes:",e),document.getElementById("loading").style.display="none",document.getElementById("emoteSetId").classList.add("error"),setTimeout(()=>{document.getElementById("emoteSetId").classList.remove("error")},1e3)}}function f(){const l=document.getElementById("memoryGrid");l.innerHTML="",t=[],n=0,o=0,document.getElementById("moves").textContent=o,document.getElementById("pairs").textContent=n,e.forEach((e,t)=>{const n=document.createElement("div");n.className="memory-card",n.dataset.index=t;const o=document.createElement("img");o.src=e.url,o.alt=e.name,n.appendChild(o),n.addEventListener("click",g),l.appendChild(n)})}function g(){if(!i||t.includes(this)||this.classList.contains("matched"))return;this.classList.add("flipped"),t.push(this),2===t.length&&(o++,document.getElementById("moves").textContent=o,i=!1,setTimeout(()=>{const[s,a]=t,l=e[s.dataset.index].id===e[a.dataset.index].id;l?(n++,document.getElementById("pairs").textContent=n,s.classList.add("matched"),a.classList.add("matched"),8===n&&((c==="-"||o<parseInt(c))&&(c=o,localStorage.setItem(`memoryHighscore_${currentSetId}`,c),document.getElementById("highscore").textContent=c,setTimeout(()=>{alert(`Spiel gewonnen!\nNeuer Highscore: ${o} ZÃ¼ge! ðŸŽ‰`)},500)),setTimeout(()=>{alert(`Spiel gewonnen!\nZÃ¼ge: ${o}\nHighscore: ${c}`)},500))):(s.classList.remove("flipped"),a.classList.remove("flipped")),t=[],i=!0},1e3))}document.getElementById("highscore").textContent=c,document.getElementById("startGame").addEventListener("click",()=>{const e=document.getElementById("emoteSetId").value.trim();s=e||"global",a=s==="global"?"Global":`Set: ${s}`,c=localStorage.getItem(`memoryHighscore_${s}`)||"-",document.getElementById("highscore").textContent=c,document.getElementById("loading").style.display="block",m()}),document.getElementById("emoteSetId").addEventListener("keypress",e=>{"Enter"===e.key&&document.getElementById("startGame").click()}),document.getElementById("backToMenu").addEventListener("click",()=>{window.location.href="index.html"}),document.addEventListener("keydown",e=>{"KeyR"===e.code&&f()}),p()})(); 